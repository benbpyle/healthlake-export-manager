package models

import (
	"encoding/json"
	"testing"
)

func Test_ShouldMarshal(t *testing.T) {
	s := "{ \"exportJobProperties\": { \"jobId\": \"55b9f2de6874d9e49d03e54175761d4a\", \"jobName\": \"Post-Export\", \"jobStatus\": \"COMPLETED\", \"submitTime\": \"Jul 18, 2023 8:53:26 PM\", \"endTime\": \"Jul 18, 2023 8:54:26 PM\", \"datastoreId\": \"465cbdb19feb7e747fefb74a2cd0c428\", \"outputDataConfig\": { \"s3Configuration\": { \"s3Uri\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/\", \"kmsKeyId\": \"arn:aws:kms:us-west-2:904442064295:key/c00e3fce-cbf4-4aa7-b01d-c24a37083808\" } }, \"dataAccessRoleArn\": \"arn:aws:iam::904442064295:role/healthlake-export-role\" }, \"transactionTime\": \"2023-07-25T15:09:37.951Z\", \"request\": \"https://healthlake.us-west-2.amazonaws.com/datastore/465cbdb19feb7e747fefb74a2cd0c428/r4/$export?_type&_since=2023-07-18T00:00:00.461Z&_outputFormat=application/fhir+ndjson\", \"requiresAccessToken\": false, \"output\": [ { \"type\": \"AllergyIntolerance\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/AllergyIntolerance/AllergyIntolerance-2139805480920260259-3-0.ndjson\" }, { \"type\": \"AllergyIntolerance\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/AllergyIntolerance/AllergyIntolerance-970275138143200697-5-0.ndjson\" }, { \"type\": \"Encounter\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/Encounter/Encounter-4450478609738686979-4-0.ndjson\" }, { \"type\": \"MedicationRequest\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationRequest/MedicationRequest-1044188327211741673-8-0.ndjson\" }, { \"type\": \"MedicationRequest\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationRequest/MedicationRequest-1246017901864602094-4-0.ndjson\" }, { \"type\": \"MedicationRequest\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationRequest/MedicationRequest-1988856543280190818-6-0.ndjson\" }, { \"type\": \"MedicationRequest\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationRequest/MedicationRequest-2122524236754163867-1-0.ndjson\" }, { \"type\": \"MedicationRequest\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationRequest/MedicationRequest-2801395996013079359-0-0.ndjson\" }, { \"type\": \"MedicationRequest\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationRequest/MedicationRequest-731709246381792360-3-0.ndjson\" }, { \"type\": \"MedicationRequest\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationRequest/MedicationRequest-888956387927045907-9-0.ndjson\" }, { \"type\": \"MedicationStatement\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationStatement/MedicationStatement-2089323468376367926-3-0.ndjson\" }, { \"type\": \"MedicationStatement\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationStatement/MedicationStatement-2642663920613073462-7-0.ndjson\" }, { \"type\": \"MedicationStatement\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationStatement/MedicationStatement-3299232459222021739-5-0.ndjson\" }, { \"type\": \"MedicationStatement\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationStatement/MedicationStatement-4228518463944704492-2-0.ndjson\" }, { \"type\": \"MedicationStatement\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationStatement/MedicationStatement-4257961854652886904-1-0.ndjson\" }, { \"type\": \"MedicationStatement\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/MedicationStatement/MedicationStatement-830794895063353919-9-0.ndjson\" }, { \"type\": \"Patient\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/Patient/Patient-2155757804223617981-6-0.ndjson\" }, { \"type\": \"Patient\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/Patient/Patient-3231656294628753199-1-0.ndjson\" }, { \"type\": \"Patient\", \"url\": \"s3://healthlake-cs-export/new-store/465cbdb19feb7e747fefb74a2cd0c428-FHIR_EXPORT-55b9f2de6874d9e49d03e54175761d4a/Patient/Patient-4528945025936956083-2-0.ndjson\" } ], \"error\": [] }"
	exd := &ExportDescription{}

	err := json.Unmarshal([]byte(s), exd)

	if err != nil {
		t.Logf("(error)=%v\n", err)
		return
	}

	t.Logf("(struct)=%v\n", exd)
}
